# /etc/haproxy/haproxy.cfg

# Redirect HTTP traffic to HTTPS
frontend http-in
    bind *:80
    reqadd X-Forwarded-Proto:\ http
    redirect scheme https code 301 if !{ ssl_fc }

# Forward HTTPS traffic to backend servers
frontend https-in
    bind *:443 ssl crt /etc/haproxy/certs/
    default_backend app

backend app
    server server1 192.168.1.1:80 check
    server server2 192.168.1.2:80 check
